<!DOCTYPE html>
<html lang="en">
<head>
    <title> ExpressWay WMS Manager side</title> 
    <meta Charset ="utf-8">

    <!--libraries-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"> </script>
    <link rel="stylesheet" type="text/css" href="../../static/external_libraries/DataTables/datatables.css">
    <script type="text/javascript" charset="utf8" src="../../static/external_libraries/DataTables/datatables.js"></script>
    <!--initialising table-->
    <script>
      
    //when document is ready initialise discrepancy table
    $(document).ready( function () {
        var tab= $('#discrepancyTable').DataTable({select: 'single'}); 
         $('#discrepancyReportTable').DataTable({"searching":false});
    /*getting data from table rows!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
         tab.on( 'select', function ( e, dt, type, indexes ) {
          if(type=="row"){
            var data = tab.rows(indexes).data().pluck('1')
            alert(data[0]);
          }     
        });
      } );
    /*overlay functions*/
    function openOL(){
      document.getElementById("overlayASN").style.width="100%";
      //TEMP!!!!!!!!!!!!!!!
      var tab = $('#discrepancyReportTable').DataTable();
      tab.row.add([1,2,3,4,5]).draw(false);
    }
    function closeOL(){
      document.getElementById("overlayASN").style.width="0";
      //TEMP!!!!!!!!!!!!!!!!
        var tab = $('#discrepancyReportTable').DataTable();
        tab.clear().draw();
    }
    </script>

    <link rel="stylesheet" href="../../static/css/manager_common.css">
    <style>
      /*overlay css*/
      .overlayContainer{         
        height: 100%;
        width: 0;
        position:fixed;
        overflow-x: hidden;
        z-index: 6;
        top:0;
        left:0;
        background-color: rgba(255,255,255,1);
        transition:0.4s;
      }
      .overlayTopBar{
        display:flex; 
        align-items:center;
        border-bottom: solid 1px; 
        box-shadow: 0 3px 3px -3px rgb(77, 77, 77);
        min-height:35px; 
        font-size: 1.25em;
        font-weight: 700;
        margin-bottom: 15px;
        }
      .discrepancyInfoGrid{
        display: grid;
        column-gap: 20px;
        width:98%;
        min-width:1000px;
        margin-left:auto;
        margin-right: auto;          
        grid-template-columns: 200px auto 200px auto;  
        font-family: 'Times New Roman', Times, serif;
        font-size: 1.25em;
        }
    </style>
</head>
<body style="margin: 0; "> 
  <!--top nav bar-->
  <header class="topBar" >
  <a class="topBarText" style ="left:19px;" href="dashboard.html">ExpressWay</a>
  <div style="display:flex;">
    <p  class = "topBarText" style =" right:30px">PLACE HOLDER FOR NAME</p> <!--!!!!!!!!!!!!!!!!!-->
    <p class="topBarText topBarLogOut" > Log Out </p>
  </div>
  </header>

  <div>
    <!--side Nav bar-->
    <nav class="sideBar">
      <p  class="sideBarText"><a href="dashboard.html">Dashboard</a></p>
      <p class="sideBarText" ><a href="order_page.html">Orders</a></p>
      <p class="sideBarText" ><a href="inventory_page.html">Inventory</a></p>
      <p class="sideBarText" ><a href="inbound_shipments_page.html">Inbound Shipments</a></p>
      <p class="sideBarText" ><a href="receive _discrepancy_page.html">Receive Discrepency</a></p>
      <p class="sideBarText" ><a href="deliveries_page.html">Deliveries</a></p>
      <p class="sideBarText" ><a href="job_assignment.html">Job Assignment</a></p>
      <p class="sideBarText" ><a href="employee_page.html">Employees</a></p>    
    </nav>

    <div class="contentContainer">
      <div style="display:flex; flex-direction: column;">
        <div class="contentTopBar">
            <p class="contentTopBarText">Shipments with Damaged/Missing Items</p>
        </div>
        
        <!--table-->
        <table id="discrepancyTable" class="display">
          <thead>
            <th>Shipment No</th>
            <th>seller id</th>
            <th>Seller Name</th>
            <th>Shipment Type</th>
            <th>Date</th>
            <th>Time</th>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!--overlay for ASN-->
  <div id="overlayASN" class="overlayContainer">
    <div style="display:flex; flex-direction: column; ">
      <div class="overlayTopBar">
          <span style="position:absolute; left: 20px;">Discrepancy Report</span>
          <span style="position:absolute; right: 20px; border:solid black 0.5px; padding:3px; cursor:pointer" onclick="closeOL()">Back</span>
      </div>
      <div class="discrepancyInfoGrid">
          <p style="grid-row-start:1;">Shipment No</p>
          <p style="grid-row-start:2;">Seller id</p>
          <p style="grid-row-start:3;">Seller Name</p>
          <p style="grid-row-start:4;">Shipment Type</p>
          <p style="grid-row-start:1;grid-column-start:3">Arrival Date</p>
          <p style="grid-row-start:2;grid-column-start:3">Arrival Time</p>
          <!--cells to be filled with data from datbase-->
          <p id="shipmentNo" style="grid-row-start: 1; grid-column-start:2"></p>
          <p id="sellerId" style="grid-row-start: 2; grid-column-start:2"></p>
          <p id="sellerName" style="grid-row-start: 3; grid-column-start:2"></p>
          <p id="shipmentType" style="grid-row-start: 4; grid-column-start:2"></p>
          <p id="arrivalDate" style="grid-row-start: 1; grid-column-start:4"></p>
          <p id="arrivalTime" style="grid-row-start: 2; grid-column-start:4"></p>
      </div>
      <p style="margin-left:10px; font-weight:700; font-size: 1.5em;">Item Discrepencies</p>
      <table id="discrepancyReportTable" class="display">
          <thead>
              <th>Item id</th>
              <th>Name</th>
              <th>Expected</th>
              <th>Undamaged</th>
              <th>Damaged</th>
          </thead>
          <tbody></tbody>
      </table>
      <div style="width:95%; margin-left: auto;margin-right: auto;">
        <p style="font-weight:700; font-size: 1.5em;">Notes</p>
        <p style=" height: 300px; border:solid black 0.8px"></p>

      </div>
     
    </div>
  </div>
  <button onclick="openOL()" style="position: fixed; right:500px; top:500px">button</button>
</body>
</html>

