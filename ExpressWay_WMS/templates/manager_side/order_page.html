{% extends "manager_side/baseManager.html" %}

{% block title %} Order{% endblock %}

{% block script %}
<script>



$(document).ready( function () {
        $('#orderTable').DataTable({
            select: 'single',
            data: {{orderTable_data|safe}},
            columns: [
                {title:'Order id'},
                {title:'Customer Name'},
                {title:'Num of items'},
                {title:'status'},
                {title:'Placed Date'},
                ]
        });
        $('#orderItemsTable').DataTable();
        } );

var tab = $('#orderTable').DataTable();
         tab.on('select', function(e, dt, type, indexes){
           var data = table.rows( indexes ).data().pluck( 'order id' );
           alert(data);
        })

//overlay functions
function openOL(){
        document.getElementById("overlayOrder").style.width="100%";
        //TEMP!!!!!!!!!!!!!!!
        var tab = $('#orderTable').DataTable();
         tab.on('select', function(e, dt, type, indexes){
           var data = table.rows( indexes ).data().pluck( 'order id' );
        })
      }
function closeOL(){
        document.getElementById("overlayOrder").style.width="0";
        //TEMP!!!!!!!!!!!!!!!!
        var tab = $('#orderItemsTable').DataTable();

        tab.clear().draw();
      }

</script>
{% endblock %}

{% block style %}
<style>
.overlayContainer{
        height: 100%;
        width: 0;
        position:fixed;
        overflow-x: hidden;
        z-index: 6;
        top:0;
        left:0;
        background-color: rgba(255,255,255,1);
        transition:0.4s;
      }
.overlayTopBar{
        display:flex;
        align-items:center;
        border-bottom: solid 1px;
        box-shadow: 0 3px 3px -3px rgb(77, 77, 77);
        min-height:35px;
        font-size: 1.25em;
        font-weight: 700;
        margin-bottom: 15px;
      }
.orderInfoGrid{
        display:grid;
        width:98%;
        min-width:1000px;
        margin-left:auto;
        margin-right: auto;
        margin-bottom: 80px;
      }
</style>

{% endblock %}

{% block content%}

<div style="display:flex; flex-direction: column;">
        <div class="contentTopBar">
            <p class="contentTopBarText">Orders</p>
            <p class="contentTopBarText contentTopBarButton">Import </p>
        </div>

        <!--table-->
        <table id="orderTable" class="display"></table>
      </div>
{% endblock %}

{% block externalContent%}
<!--overlay for ASN-->
  <div id="overlayOrder" class="overlayContainer">
    <div class="overlayTopBar">
      <span style="position:absolute; left: 20px;">Order Items</span>
      <span style="position:absolute; right: 20px; border:solid black 0.5px; padding:3px; cursor:pointer" onclick="closeOL()">Back</span>
    </div>
    <div class="orderInfoGrid">
      <p style="grid-row-start: 1;">Order id</p>
      <p style="grid-row-start: 2;">Customer Name</p>
      <p style="grid-row-start: 3;">Date</p>
      <!--cells to be filled with data from database-->
      <p id="orderID" style="grid-row-start: 1; grid-column-start:2"></p>
      <p id="customerName" style="grid-row-start: 2; grid-column-start:2"></p>
      <p id="date" style="grid-row-start: 3; grid-row-end: 5; grid-column-start:2"></p>
      <p style="grid-row-start: 1; grid-row-end: 2; grid-column-start:3; font-size: 1.5em; font-weight: 700;">Status: <span id = "status"></span></p>
    </div>
    <p style="margin-left:10px; font-size:1.5em; font-weight: 700; ">Items</p>
    <table id="orderItemsTable" class="display">
      <thead>
        <th>No</th>
        <th>Item Id</th>
        <th>Name</th>
        <th>Seller id</th>
        <th>Quantity</th>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>

  <button onclick="openOL()" style="position: fixed; right:500px; top:500px">button</button>
{% endblock %}
